<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asteroids Game - Hutch's Mobile Services</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1f1f1f 0%, #2d1b69 50%, #1f1f1f 100%);
        }
        
        .game-container {
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
            border: 3px solid #6b46c1;
            box-shadow: 0 0 30px rgba(107, 70, 193, 0.5);
            position: relative;
            overflow: hidden;
        }
        
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #fbbf24, transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 90px 40px, #6b46c1, transparent),
                radial-gradient(1px 1px at 130px 80px, #fbbf24, transparent),
                radial-gradient(2px 2px at 160px 30px, rgba(255,255,255,0.6), transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: twinkle 4s ease-in-out infinite alternate;
        }
        
        @keyframes twinkle {
            0% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        
        .pulse-glow {
            animation: pulseGlow 2s ease-in-out infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(251, 191, 36, 0.3); }
            50% { box-shadow: 0 0 40px rgba(251, 191, 36, 0.6); }
        }
        
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #fbbf24, #6b46c1);
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .slide-in-left {
            animation: slideInLeft 1s ease-out;
        }
        
        .slide-in-right {
            animation: slideInRight 1s ease-out;
        }
        
        @keyframes slideInLeft {
            from { transform: translateX(-100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .explosion {
            position: absolute;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #fbbf24;
            border-radius: 50%;
            animation: explodeParticle 1s ease-out forwards;
        }
        
        @keyframes explodeParticle {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0);
            }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen text-white">
    <header class="fixed w-full top-0 z-50 bg-black/20 backdrop-blur-lg border-b border-purple-500/20">
        <nav class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <h1 class="text-2xl font-bold bg-gradient-to-r from-yellow-400 to-purple-500 bg-clip-text text-transparent slide-in-left">
                    <a href="/">Hutch's Mobile Services</a>
                </h1>
                <ul class="flex space-x-8 slide-in-right">
                    <li><a href="/" class="nav-link text-gray-300 hover:text-yellow-400 font-medium">Home</a></li>
                    <li><a href="/about" class="nav-link text-gray-300 hover:text-yellow-400 font-medium">About Us</a></li>
                    <li><a href="/#services" class="nav-link text-gray-300 hover:text-yellow-400 font-medium">Services</a></li>
                    <li><a href="/#ask-a-mechanic" class="nav-link text-gray-300 hover:text-yellow-400 font-medium">Contact</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <div class="pt-24 pb-12">
        <div class="container mx-auto px-6">
            <div class="text-center mb-8">
                <h1 class="text-5xl font-bold mb-4 bg-gradient-to-r from-yellow-400 to-purple-500 bg-clip-text text-transparent">
                    üöÄ Hutch's Asteroids Challenge
                </h1>
                <p class="text-xl text-gray-300 mb-6">Navigate through space and destroy asteroids! Use arrow keys to move, spacebar to shoot.</p>
            </div>

            <div class="max-w-2xl mx-auto">
                <!-- Game Stats -->
                <div class="bg-gray-800/50 rounded-lg p-4 mb-4 backdrop-blur-sm border border-purple-500/20">
                    <div class="flex justify-between items-center">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-yellow-400" id="score">0</div>
                            <div class="text-sm text-gray-400">Score</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-400" id="level">1</div>
                            <div class="text-sm text-gray-400">Level</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-400" id="lives">3</div>
                            <div class="text-sm text-gray-400">Lives</div>
                        </div>
                    </div>
                </div>

                <!-- Game Area -->
                <div class="game-container rounded-lg relative mx-auto max-w-full" style="width: min(800px, 100vw - 2rem); height: min(600px, 60vh);" id="gameArea">
                    <div class="stars"></div>
                    <canvas id="gameCanvas" class="absolute inset-0 w-full h-full"></canvas>
                </div>

                <!-- Game Controls -->
                <div class="mt-6 text-center">
                    <button id="startBtn" class="pulse-glow bg-gradient-to-r from-yellow-400 to-purple-500 text-black px-8 py-3 rounded-full font-semibold text-lg hover:scale-105 transition-all duration-300 mr-4">
                        Start Game
                    </button>
                    <button id="pauseBtn" class="bg-gray-600 text-white px-6 py-3 rounded-full font-semibold hover:bg-gray-500 transition-all duration-300" disabled>
                        Pause
                    </button>
                </div>

                <!-- Mobile Touch Controls -->
                <div id="touchControls" class="hidden fixed bottom-4 left-4 right-4 z-40 md:hidden">
                    <div class="flex justify-between items-end">
                        <!-- Virtual Joystick -->
                        <div class="relative">
                            <div id="joystickArea" class="w-24 h-24 bg-gray-800/70 rounded-full border-2 border-purple-500/50 flex items-center justify-center backdrop-blur-sm">
                                <div id="joystickKnob" class="w-8 h-8 bg-yellow-400 rounded-full shadow-lg transition-all duration-100"></div>
                            </div>
                            <div class="text-xs text-gray-400 text-center mt-1">Move</div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="flex flex-col space-y-3">
                            <button id="thrustBtn" class="w-16 h-16 bg-purple-600/80 rounded-full border-2 border-purple-400 flex items-center justify-center backdrop-blur-sm active:scale-95 transition-all">
                                <span class="text-white font-bold">‚Üë</span>
                            </button>
                            <button id="shootBtn" class="w-16 h-16 bg-yellow-500/80 rounded-full border-2 border-yellow-400 flex items-center justify-center backdrop-blur-sm active:scale-95 transition-all">
                                <span class="text-black font-bold">üî´</span>
                            </button>
                            <div class="text-xs text-gray-400 text-center">Thrust/Shoot</div>
                        </div>
                    </div>
                </div>

                <!-- Instructions -->
                <div class="mt-6 bg-gray-800/30 rounded-lg p-4 backdrop-blur-sm border border-purple-500/10">
                    <h3 class="text-lg font-semibold text-yellow-400 mb-2">How to Play:</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <h4 class="text-yellow-400 font-medium mb-1">Desktop:</h4>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>‚Ä¢ Use ‚Üë arrow key to thrust forward</li>
                                <li>‚Ä¢ Use ‚Üê ‚Üí arrow keys to rotate left/right</li>
                                <li>‚Ä¢ Press SPACEBAR to shoot lasers</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="text-yellow-400 font-medium mb-1">Mobile:</h4>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>‚Ä¢ Use virtual joystick to rotate ship</li>
                                <li>‚Ä¢ Tap thrust button (‚Üë) to move forward</li>
                                <li>‚Ä¢ Tap shoot button (üî´) to fire lasers</li>
                            </ul>
                        </div>
                    </div>
                    <div class="mt-3 pt-3 border-t border-purple-500/20">
                        <ul class="text-sm text-gray-300 space-y-1">
                            <li>‚Ä¢ Destroy all asteroids to advance levels</li>
                            <li>‚Ä¢ Large asteroids break into smaller ones</li>
                            <li>‚Ä¢ Avoid colliding with asteroids!</li>
                        </ul>
                    </div>
                </div>

                <!-- Game Over Screen -->
                <div id="gameOverScreen" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center z-50">
                    <div class="bg-gradient-to-br from-purple-900 to-gray-800 p-8 rounded-2xl text-center border border-purple-500/50 max-w-sm mx-4">
                        <h2 class="text-3xl font-bold text-yellow-400 mb-4">Game Over!</h2>
                        <p class="text-xl text-gray-300 mb-2">Final Score:</p>
                        <p class="text-4xl font-bold text-purple-400 mb-2" id="finalScore">0</p>
                        <p class="text-lg text-gray-300 mb-6">Level Reached: <span id="finalLevel" class="text-yellow-400">1</span></p>
                        <button id="restartBtn" class="bg-gradient-to-r from-yellow-400 to-purple-500 text-black px-6 py-3 rounded-full font-semibold hover:scale-105 transition-all duration-300">
                            Play Again
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-black py-8 border-t border-purple-500/20 mt-12">
        <div class="container mx-auto px-6 text-center">
            <p class="text-gray-400">&copy; 2019 Hutch's Mobile Services LLC. All rights reserved.</p>
        </div>
    </footer>

    <script>
        class AsteroidsGame {
            constructor() {
                this.canvas = document.getElementById('gameCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.gameArea = document.getElementById('gameArea');
                
                // Make canvas responsive
                this.resizeCanvas();
                window.addEventListener('resize', () => this.resizeCanvas());
                
                this.score = 0;
                this.level = 1;
                this.lives = 3;
                this.isGameRunning = false;
                this.isPaused = false;
                
                this.ship = {
                    x: this.width / 2,
                    y: this.height / 2,
                    angle: 0,
                    velocity: { x: 0, y: 0 },
                    radius: 10,
                    invulnerable: 0
                };
                
                this.bullets = [];
                this.asteroids = [];
                this.particles = [];
                
                this.keys = {};
                
                // Touch controls
                this.touchControls = {
                    joystick: { active: false, x: 0, y: 0, centerX: 0, centerY: 0 },
                    thrust: false,
                    shoot: false
                };
                
                this.init();
            }
            
            resizeCanvas() {
                const rect = this.gameArea.getBoundingClientRect();
                this.width = rect.width;
                this.height = rect.height;
                this.canvas.width = this.width;
                this.canvas.height = this.height;
                
                // Update ship position if it exists
                if (this.ship) {
                    this.ship.x = Math.min(this.ship.x, this.width);
                    this.ship.y = Math.min(this.ship.y, this.height);
                }
            }
            
            init() {
                this.bindEvents();
                this.updateDisplay();
                this.createAsteroids();
            }
            
            bindEvents() {
                document.getElementById('startBtn').addEventListener('click', () => this.startGame());
                document.getElementById('pauseBtn').addEventListener('click', () => this.togglePause());
                document.getElementById('restartBtn').addEventListener('click', () => this.restartGame());
                
                // Keyboard events
                document.addEventListener('keydown', (e) => {
                    this.keys[e.code] = true;
                    if (['ArrowUp', 'ArrowLeft', 'ArrowRight', 'Space'].includes(e.code)) {
                        e.preventDefault();
                    }
                });
                
                document.addEventListener('keyup', (e) => {
                    this.keys[e.code] = false;
                });
                
                // Touch events for mobile controls
                this.setupTouchControls();
            }
            
            setupTouchControls() {
                const joystickArea = document.getElementById('joystickArea');
                const joystickKnob = document.getElementById('joystickKnob');
                const thrustBtn = document.getElementById('thrustBtn');
                const shootBtn = document.getElementById('shootBtn');
                
                // Virtual joystick
                joystickArea.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    const rect = joystickArea.getBoundingClientRect();
                    this.touchControls.joystick.centerX = rect.left + rect.width / 2;
                    this.touchControls.joystick.centerY = rect.top + rect.height / 2;
                    this.touchControls.joystick.active = true;
                    this.handleJoystickMove(e.touches[0]);
                });
                
                joystickArea.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                    if (this.touchControls.joystick.active) {
                        this.handleJoystickMove(e.touches[0]);
                    }
                });
                
                joystickArea.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    this.touchControls.joystick.active = false;
                    joystickKnob.style.transform = 'translate(-50%, -50%)';
                });
                
                // Thrust button
                thrustBtn.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.touchControls.thrust = true;
                });
                
                thrustBtn.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    this.touchControls.thrust = false;
                });
                
                // Shoot button
                shootBtn.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.touchControls.shoot = true;
                });
                
                shootBtn.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    this.touchControls.shoot = false;
                });
            }
            
            handleJoystickMove(touch) {
                const deltaX = touch.clientX - this.touchControls.joystick.centerX;
                const deltaY = touch.clientY - this.touchControls.joystick.centerY;
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                const maxDistance = 40; // Half of joystick area width
                
                if (distance <= maxDistance) {
                    this.touchControls.joystick.x = deltaX;
                    this.touchControls.joystick.y = deltaY;
                } else {
                    this.touchControls.joystick.x = (deltaX / distance) * maxDistance;
                    this.touchControls.joystick.y = (deltaY / distance) * maxDistance;
                }
                
                // Update knob position
                const knob = document.getElementById('joystickKnob');
                knob.style.transform = `translate(calc(-50% + ${this.touchControls.joystick.x}px), calc(-50% + ${this.touchControls.joystick.y}px))`;
            }
            
            startGame() {
                this.isGameRunning = true;
                this.isPaused = false;
                document.getElementById('startBtn').disabled = true;
                document.getElementById('pauseBtn').disabled = false;
                document.getElementById('startBtn').textContent = 'Playing...';
                
                // Show touch controls on mobile
                if (window.innerWidth < 768) {
                    document.getElementById('touchControls').classList.remove('hidden');
                }
                
                this.gameLoop();
            }
            
            togglePause() {
                this.isPaused = !this.isPaused;
                document.getElementById('pauseBtn').textContent = this.isPaused ? 'Resume' : 'Pause';
                if (!this.isPaused) {
                    this.gameLoop();
                }
            }
            
            restartGame() {
                document.getElementById('gameOverScreen').classList.add('hidden');
                document.getElementById('touchControls').classList.add('hidden');
                this.score = 0;
                this.level = 1;
                this.lives = 3;
                this.ship = {
                    x: this.width / 2,
                    y: this.height / 2,
                    angle: 0,
                    velocity: { x: 0, y: 0 },
                    radius: 10,
                    invulnerable: 0
                };
                this.bullets = [];
                this.asteroids = [];
                this.particles = [];
                this.createAsteroids();
                this.updateDisplay();
                document.getElementById('startBtn').disabled = false;
                document.getElementById('pauseBtn').disabled = true;
                document.getElementById('startBtn').textContent = 'Start Game';
                this.isGameRunning = false;
            }
            
            createAsteroids() {
                this.asteroids = [];
                const numAsteroids = 4 + this.level;
                
                for (let i = 0; i < numAsteroids; i++) {
                    let x, y;
                    do {
                        x = Math.random() * this.width;
                        y = Math.random() * this.height;
                    } while (this.distance(x, y, this.ship.x, this.ship.y) < 100);
                    
                    this.asteroids.push({
                        x: x,
                        y: y,
                        velocity: {
                            x: (Math.random() - 0.5) * 2,
                            y: (Math.random() - 0.5) * 2
                        },
                        angle: Math.random() * Math.PI * 2,
                        angularVelocity: (Math.random() - 0.5) * 0.1,
                        radius: 40,
                        size: 'large'
                    });
                }
            }
            
            gameLoop() {
                if (!this.isGameRunning || this.isPaused) return;
                
                this.update();
                this.draw();
                this.updateDisplay();
                
                requestAnimationFrame(() => this.gameLoop());
            }
            
            update() {
                this.handleInput();
                this.updateShip();
                this.updateBullets();
                this.updateAsteroids();
                this.updateParticles();
                this.checkCollisions();
                
                // Check if level is complete
                if (this.asteroids.length === 0) {
                    this.level++;
                    this.createAsteroids();
                }
                
                // Decrease invulnerability
                if (this.ship.invulnerable > 0) {
                    this.ship.invulnerable--;
                }
            }
            
            handleInput() {
                // Keyboard input
                if (this.keys['ArrowLeft']) {
                    this.ship.angle -= 0.1;
                }
                if (this.keys['ArrowRight']) {
                    this.ship.angle += 0.1;
                }
                if (this.keys['ArrowUp']) {
                    const thrust = 0.3;
                    this.ship.velocity.x += Math.cos(this.ship.angle) * thrust;
                    this.ship.velocity.y += Math.sin(this.ship.angle) * thrust;
                }
                if (this.keys['Space']) {
                    this.shoot();
                }
                
                // Touch input
                if (this.touchControls.joystick.active) {
                    // Convert joystick position to rotation
                    const angle = Math.atan2(this.touchControls.joystick.y, this.touchControls.joystick.x);
                    this.ship.angle = angle;
                }
                
                if (this.touchControls.thrust) {
                    const thrust = 0.3;
                    this.ship.velocity.x += Math.cos(this.ship.angle) * thrust;
                    this.ship.velocity.y += Math.sin(this.ship.angle) * thrust;
                }
                
                if (this.touchControls.shoot) {
                    this.shoot();
                    // Prevent continuous shooting
                    this.touchControls.shoot = false;
                }
            }
            
            updateShip() {
                // Apply friction
                this.ship.velocity.x *= 0.99;
                this.ship.velocity.y *= 0.99;
                
                // Update position
                this.ship.x += this.ship.velocity.x;
                this.ship.y += this.ship.velocity.y;
                
                // Wrap around screen
                this.ship.x = (this.ship.x + this.width) % this.width;
                this.ship.y = (this.ship.y + this.height) % this.height;
            }
            
            shoot() {
                if (this.bullets.length < 4) { // Limit bullets
                    this.bullets.push({
                        x: this.ship.x + Math.cos(this.ship.angle) * 15,
                        y: this.ship.y + Math.sin(this.ship.angle) * 15,
                        velocity: {
                            x: Math.cos(this.ship.angle) * 8,
                            y: Math.sin(this.ship.angle) * 8
                        },
                        life: 60
                    });
                }
            }
            
            updateBullets() {
                this.bullets = this.bullets.filter(bullet => {
                    bullet.x += bullet.velocity.x;
                    bullet.y += bullet.velocity.y;
                    bullet.life--;
                    
                    // Wrap around screen
                    bullet.x = (bullet.x + this.width) % this.width;
                    bullet.y = (bullet.y + this.height) % this.height;
                    
                    return bullet.life > 0;
                });
            }
            
            updateAsteroids() {
                this.asteroids.forEach(asteroid => {
                    asteroid.x += asteroid.velocity.x;
                    asteroid.y += asteroid.velocity.y;
                    asteroid.angle += asteroid.angularVelocity;
                    
                    // Wrap around screen
                    asteroid.x = (asteroid.x + this.width) % this.width;
                    asteroid.y = (asteroid.y + this.height) % this.height;
                });
            }
            
            updateParticles() {
                this.particles = this.particles.filter(particle => {
                    particle.x += particle.velocity.x;
                    particle.y += particle.velocity.y;
                    particle.life--;
                    particle.velocity.x *= 0.98;
                    particle.velocity.y *= 0.98;
                    
                    return particle.life > 0;
                });
            }
            
            checkCollisions() {
                // Bullet-asteroid collisions
                this.bullets.forEach((bullet, bulletIndex) => {
                    this.asteroids.forEach((asteroid, asteroidIndex) => {
                        if (this.distance(bullet.x, bullet.y, asteroid.x, asteroid.y) < asteroid.radius) {
                            // Remove bullet
                            this.bullets.splice(bulletIndex, 1);
                            
                            // Create explosion particles
                            this.createExplosion(asteroid.x, asteroid.y);
                            
                            // Score points
                            if (asteroid.size === 'large') this.score += 20;
                            else if (asteroid.size === 'medium') this.score += 50;
                            else this.score += 100;
                            
                            // Break asteroid
                            this.breakAsteroid(asteroid, asteroidIndex);
                        }
                    });
                });
                
                // Ship-asteroid collisions
                if (this.ship.invulnerable === 0) {
                    this.asteroids.forEach(asteroid => {
                        if (this.distance(this.ship.x, this.ship.y, asteroid.x, asteroid.y) < asteroid.radius + this.ship.radius) {
                            this.lives--;
                            this.ship.invulnerable = 120; // 2 seconds of invulnerability
                            this.createExplosion(this.ship.x, this.ship.y);
                            
                            if (this.lives <= 0) {
                                this.gameOver();
                            }
                        }
                    });
                }
            }
            
            breakAsteroid(asteroid, index) {
                this.asteroids.splice(index, 1);
                
                if (asteroid.size === 'large') {
                    // Create 2 medium asteroids
                    for (let i = 0; i < 2; i++) {
                        this.asteroids.push({
                            x: asteroid.x,
                            y: asteroid.y,
                            velocity: {
                                x: (Math.random() - 0.5) * 3,
                                y: (Math.random() - 0.5) * 3
                            },
                            angle: Math.random() * Math.PI * 2,
                            angularVelocity: (Math.random() - 0.5) * 0.15,
                            radius: 20,
                            size: 'medium'
                        });
                    }
                } else if (asteroid.size === 'medium') {
                    // Create 2 small asteroids
                    for (let i = 0; i < 2; i++) {
                        this.asteroids.push({
                            x: asteroid.x,
                            y: asteroid.y,
                            velocity: {
                                x: (Math.random() - 0.5) * 4,
                                y: (Math.random() - 0.5) * 4
                            },
                            angle: Math.random() * Math.PI * 2,
                            angularVelocity: (Math.random() - 0.5) * 0.2,
                            radius: 10,
                            size: 'small'
                        });
                    }
                }
            }
            
            createExplosion(x, y) {
                for (let i = 0; i < 8; i++) {
                    this.particles.push({
                        x: x,
                        y: y,
                        velocity: {
                            x: (Math.random() - 0.5) * 6,
                            y: (Math.random() - 0.5) * 6
                        },
                        life: 30,
                        color: Math.random() > 0.5 ? '#fbbf24' : '#6b46c1'
                    });
                }
            }
            
            distance(x1, y1, x2, y2) {
                return Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
            }
            
            draw() {
                // Clear canvas
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                this.ctx.fillRect(0, 0, this.width, this.height);
                
                // Draw ship
                this.drawShip();
                
                // Draw bullets
                this.bullets.forEach(bullet => this.drawBullet(bullet));
                
                // Draw asteroids
                this.asteroids.forEach(asteroid => this.drawAsteroid(asteroid));
                
                // Draw particles
                this.particles.forEach(particle => this.drawParticle(particle));
            }
            
            drawShip() {
                this.ctx.save();
                this.ctx.translate(this.ship.x, this.ship.y);
                this.ctx.rotate(this.ship.angle);
                
                // Ship body
                this.ctx.strokeStyle = this.ship.invulnerable > 0 && Math.floor(this.ship.invulnerable / 5) % 2 ? 
                    'rgba(251, 191, 36, 0.5)' : '#fbbf24';
                this.ctx.fillStyle = this.ship.invulnerable > 0 && Math.floor(this.ship.invulnerable / 5) % 2 ? 
                    'rgba(251, 191, 36, 0.3)' : 'rgba(251, 191, 36, 0.8)';
                this.ctx.lineWidth = 2;
                
                this.ctx.beginPath();
                this.ctx.moveTo(15, 0);
                this.ctx.lineTo(-10, -8);
                this.ctx.lineTo(-5, 0);
                this.ctx.lineTo(-10, 8);
                this.ctx.closePath();
                this.ctx.fill();
                this.ctx.stroke();
                
                // Thruster
                if (this.keys['ArrowUp']) {
                    this.ctx.strokeStyle = '#6b46c1';
                    this.ctx.lineWidth = 3;
                    this.ctx.beginPath();
                    this.ctx.moveTo(-10, -3);
                    this.ctx.lineTo(-18, 0);
                    this.ctx.lineTo(-10, 3);
                    this.ctx.stroke();
                }
                
                this.ctx.restore();
            }
            
            drawBullet(bullet) {
                this.ctx.fillStyle = '#6b46c1';
                this.ctx.shadowColor = '#6b46c1';
                this.ctx.shadowBlur = 10;
                this.ctx.beginPath();
                this.ctx.arc(bullet.x, bullet.y, 3, 0, Math.PI * 2);
                this.ctx.fill();
                this.ctx.shadowBlur = 0;
            }
            
            drawAsteroid(asteroid) {
                this.ctx.save();
                this.ctx.translate(asteroid.x, asteroid.y);
                this.ctx.rotate(asteroid.angle);
                
                this.ctx.strokeStyle = '#9ca3af';
                this.ctx.fillStyle = 'rgba(156, 163, 175, 0.3)';
                this.ctx.lineWidth = 2;
                
                this.ctx.beginPath();
                const points = 8;
                for (let i = 0; i < points; i++) {
                    const angle = (i / points) * Math.PI * 2;
                    const radius = asteroid.radius + Math.sin(angle * 3) * (asteroid.radius * 0.2);
                    const x = Math.cos(angle) * radius;
                    const y = Math.sin(angle) * radius;
                    
                    if (i === 0) {
                        this.ctx.moveTo(x, y);
                    } else {
                        this.ctx.lineTo(x, y);
                    }
                }
                this.ctx.closePath();
                this.ctx.fill();
                this.ctx.stroke();
                
                this.ctx.restore();
            }
            
            drawParticle(particle) {
                this.ctx.fillStyle = particle.color;
                this.ctx.globalAlpha = particle.life / 30;
                this.ctx.beginPath();
                this.ctx.arc(particle.x, particle.y, 2, 0, Math.PI * 2);
                this.ctx.fill();
                this.ctx.globalAlpha = 1;
            }
            
            gameOver() {
                this.isGameRunning = false;
                document.getElementById('touchControls').classList.add('hidden');
                document.getElementById('finalScore').textContent = this.score;
                document.getElementById('finalLevel').textContent = this.level;
                document.getElementById('gameOverScreen').classList.remove('hidden');
            }
            
            updateDisplay() {
                document.getElementById('score').textContent = this.score;
                document.getElementById('level').textContent = this.level;
                document.getElementById('lives').textContent = this.lives;
            }
        }
        
        // Initialize the game when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new AsteroidsGame();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96d488e373876501',t:'MTc1NDg4MTc3Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
